cmake_minimum_required(VERSION 3.27)
project(Bang)

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

file(GLOB BangLibSources src/BangLib/*.cc)
add_library(Bang STATIC ${BangLibSources})
target_include_directories(Bang PUBLIC "include/BangLib")
target_include_directories(Bang PUBLIC "include/UtilsLib")
target_include_directories(Bang PUBLIC "../jsoncpp/include")
target_include_directories(Bang PUBLIC "../fmt/include")
set_property(TARGET Bang PROPERTY CXX_STANDARD 20)

file(GLOB GraphicsLibSources src/GraphicsLib/*.cc)
add_library(Graphics SHARED ${GraphicsLibSources})
target_include_directories(Graphics PUBLIC "include/GraphicsLib")
target_include_directories(Graphics PUBLIC "include/UtilsLib")
set_property(TARGET Graphics PROPERTY CXX_STANDARD 20)

file(GLOB UtilsLibSources src/UtilsLib/*.cc)
add_library(Utils SHARED ${UtilsLibSources})
target_include_directories(Utils PUBLIC "include/UtilsLib")
set_property(TARGET Utils PROPERTY CXX_STANDARD 20)

file(GLOB BangSources src/*.cc)
add_executable(BangGame ${BangSources})
find_library(SDLLibPath SDL2 "/usr/lib")
find_library(SDL_IMGLibPath SDL2_image "/usr/lib/")
find_library(SDL_TTFLibPath SDL2_ttf "/usr/lib/")
find_library(jsonppLibPath jsoncpp "../jsoncpp/build/lib/")
find_library(fmtLibPath fmt "../fmt/build/")
target_link_libraries(BangGame PUBLIC Bang Graphics Utils ${SDLLibPath} ${SDL_IMGLibPath} ${SDL_TTFLibPath} ${jsonppLibPath} ${fmtLibPath})
target_include_directories(BangGame PUBLIC "include/")
target_include_directories(BangGame PUBLIC "/usr/include/")
set_property(TARGET BangGame PROPERTY CXX_STANDARD 20)

set_target_properties(Bang PROPERTIES ARCHIVE_OUTPUT_DIRECTORY "lib" LIBRARY_OUTPUT_DIRECTORY "lib" RUNTIME_OUTPUT_DIRECTORY "bin")
set_target_properties(Graphics PROPERTIES ARCHIVE_OUTPUT_DIRECTORY "lib" LIBRARY_OUTPUT_DIRECTORY "lib" RUNTIME_OUTPUT_DIRECTORY "bin")
set_target_properties(Utils PROPERTIES ARCHIVE_OUTPUT_DIRECTORY "lib" LIBRARY_OUTPUT_DIRECTORY "lib" RUNTIME_OUTPUT_DIRECTORY "bin")
set_target_properties(BangGame PROPERTIES ARCHIVE_OUTPUT_DIRECTORY "lib" LIBRARY_OUTPUT_DIRECTORY "lib" RUNTIME_OUTPUT_DIRECTORY "bin")
